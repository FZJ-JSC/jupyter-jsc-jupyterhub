diff -Naurx .git -x node_modules -x share -x __pycache__ ../jupyterhub/jupyterhub/user.py ../jupyterhub-patched/jupyterhub/user.py
--- ../jupyterhub/jupyterhub/user.py	2022-08-31 10:34:29.000000000 +0200
+++ ../jupyterhub-patched/jupyterhub/user.py	2022-08-31 11:41:33.000000000 +0200
@@ -8,6 +8,7 @@
 from urllib.parse import quote
 from urllib.parse import urlparse
 
+from asyncio import Event
 from sqlalchemy import inspect
 from tornado import gen
 from tornado import web
@@ -226,6 +227,10 @@
     log = app_log
     settings = None
     _auth_refreshed = None
+    # asyncio Events to signal start and stop of a new server.
+    # These events get set in spawn and stop functions.
+    spawn_start_event = Event()
+    spawn_stop_event = Event()
 
     def __init__(self, orm_user, settings=None, db=None):
         self.db = db or inspect(orm_user).session
@@ -729,6 +734,8 @@
             f = maybe_future(spawner.start())
             # commit any changes in spawner.start (always commit db changes before yield)
             db.commit()
+            # Set asyncio spawn Event
+            self.spawn_start_event.set()
             url = await gen.with_timeout(timedelta(seconds=spawner.start_timeout), f)
             if url:
                 # get ip, port info from return value of start()
@@ -909,6 +916,7 @@
         spawner._check_pending = False
         spawner.stop_polling()
         spawner._stop_pending = True
+        self.spawn_stop_event.set()
 
         self.log.debug("Stopping %s", spawner._log_name)
 
